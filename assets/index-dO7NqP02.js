import{u as f,ac as w,d,R as x,j as e,L as j}from"./index-DgDS95zu.js";/* empty css              */import{u as v}from"./api-Df7WHB2j.js";import{A as E}from"./index-BtGq94Vz.js";import{F as N,C as g}from"./index-B0kuquvW.js";import"./index-Cl3IMY8X.js";import{P as R}from"./index-BfmZXqtO.js";/* empty css              */import{u as P}from"./useMutation-BVHFNGNj.js";import{s as l}from"./index-ojMjYGyW.js";/* empty css              */import"./row-SZHG0-a2.js";import"./responsiveObserver-DRpm5Nti.js";import"./index-DwhGeG0W.js";import"./index-R0fvpz9K.js";import"./index-DWF4fKbI.js";import"./TextArea-DPz20TLR.js";const L=()=>{const i=async s=>(await v.post(`/userservice/v1/reset-password/${s.token}/`,s,{headers:{"Content-Type":"application/json"}})).data,{mutate:n,data:a,error:c,isLoading:m,isError:r,isSuccess:t}=P(i);return{mutate:n,data:a,error:c,isLoading:m,isError:r,isSuccess:t}},B=()=>{const i=f(),{mutate:n,isError:a,isLoading:c,isSuccess:m,error:r,data:t}=L(),{code:s,expiry:u}=w();d.useEffect(()=>{var o,p;a&&((p=(o=r==null?void 0:r.response)==null?void 0:o.data)!=null&&p.error)&&l.error(r.response.data.error)},[a]),d.useEffect(()=>{t!=null&&t.message&&(l.success(t.message),i(x.LOG_IN))},[m,t]);const h=o=>{if(!s)return l.error("Link has been expired !");n({token:s,...o})};return e.jsx("div",{className:"flex items-center justify-center w-full h-[100vh] text-center",children:e.jsxs("div",{className:"content w-[100vw] md:w-[50vw] lg:w-[40vw] p-2 text-white flex items-center flex-col",children:[e.jsx(E,{}),e.jsxs("span",{className:"text-4xl md:text-4xl lg:text-5xl text-secondary px-[10%] mb-5",children:[!s&&e.jsx("span",{className:"whitespace-nowrap",children:"LINK EXPIRED"}),s&&e.jsx("span",{className:"whitespace-nowrap",children:"SET NEW PASSWORD"})]}),e.jsxs("div",{className:"w-full px-[10%]",children:[s&&e.jsxs(N,{onFinish:h,children:[e.jsx(R,{confirm:!0}),e.jsx(g,{text:"AUTHENTICATE",isLoading:c})]}),e.jsxs("div",{className:"text-white text-sm  my-1 text-primary flex flex-col gap-1",children:[!s&&e.jsx("div",{children:"Looks like the link has been expired!"}),!s&&e.jsxs("div",{className:"mt-2",children:["Request new link hereÂ ",e.jsx(j,{to:x.FORGOT_PASSWORD,className:"font-bold underline",children:"Resend Email"})]}),s&&e.jsx("div",{children:"Password must be minimum 8 characters and must contain at least one uppercase letter, one lowercase letter, one number, and one special character!"})]})]})]})})};export{B as default};
