import{p as x,d as l,j as s,b2 as f,a5 as p}from"./index-DgDS95zu.js";import{A as h}from"./index-BDLKheLK.js";import{u as g}from"./useMutation-BVHFNGNj.js";import{m as j}from"./api-Df7WHB2j.js";import"./index-R0fvpz9K.js";import"./index-DwhGeG0W.js";import"./index-C3RW8Dcq.js";import"./PurePanel-CkQP6TjL.js";const v=()=>{const o=x(c=>c.auth.user.id),i=async(c={})=>(await j.get(`/meditations/v1/${o}/meditations/`,c,{headers:{"Content-Type":"application/json"}})).data,{mutate:e,data:a,error:r,isLoading:n,isError:d,isSuccess:u}=g(i);return{mutate:e,data:a,error:r,isLoading:n,isError:d,isSuccess:u}},y=({src:o,alt:i,className:e})=>{const[a,r]=l.useState(!0),n=()=>{r(!1)};return s.jsxs(s.Fragment,{children:[a&&s.jsx("img",{src:"/static/meditation_thumbnail_467.jpg",className:e,alt:i,style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}}),s.jsx("img",{src:o,className:e,alt:i,onLoad:n,style:{display:a?"none":"block",transition:"filter 500ms ease-in-out"}})]})},_=({title:o,duration:i,type:e,background:a,onClick:r})=>s.jsxs("a",{className:"favorites-item text-secondary",onClick:r,children:[s.jsx(y,{src:a,className:"w-full h-full favorites-background-image",alt:"Presence in the Meadow"}),s.jsxs("div",{className:"favorites-text-div",children:[s.jsx("span",{className:"favorites-title",children:o}),s.jsxs("span",{className:"favorites-length text-primary",children:[i," minutes"]}),s.jsx("span",{className:"favorites-type text-primary",children:e})]}),s.jsxs("div",{className:"buttons-container",children:[s.jsx(p,{className:"share-button shadow-xl rounded-lg",icon:s.jsx("img",{src:"/static/assets/download.svg",alt:"Share icon"})}),s.jsx(p,{className:"share-button shadow-xl rounded-lg",icon:s.jsx("img",{src:"/static/assets/favorite_filled.svg",alt:"Share icon"})})]})]}),C=()=>{const[o,i]=l.useState([]),[e,a]=l.useState(null),{mutate:r,data:n,isSuccess:d,isError:u,error:c,isLoading:m}=v();return l.useEffect(r,[]),l.useEffect(()=>{d&&i(n.map((t,b)=>({id:t.meditation_id.meditation_id,title:t.meditation_id.session_title,type:t.meditation_id.session_type,duration:2,background:t.meditation_id.thumbnail_src,audio_url:t.meditation_id.audio_url})))},[n,d]),m?s.jsx(f,{visible:!0}):s.jsxs("div",{className:"relative w-full h-full",children:[s.jsx("div",{className:"favorites-area m-4",children:o.map(t=>s.jsx(_,{id:t.id,title:t.title,type:t.type,duration:t.duration,background:t.background,onClick:()=>a(t)},t.id))}),s.jsx("div",{className:"sticky bottom-0 left-0 w-full z-[1]",children:s.jsxs("div",{className:"p-5",children:[" ",e&&s.jsx(h,{title:e.title,trackUrl:e.audio_url,onClose:()=>a(null)},e.audio_url)]})})]})};export{C as default};
